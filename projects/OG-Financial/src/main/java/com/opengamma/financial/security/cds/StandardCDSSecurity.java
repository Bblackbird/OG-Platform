/**
 * Copyright (C) 2012 - present by OpenGamma Inc. and the OpenGamma group of companies
 *
 * Please see distribution for license.
 */
package com.opengamma.financial.security.cds;

import java.util.Map;

import javax.time.calendar.ZonedDateTime;

import org.joda.beans.BeanBuilder;
import org.joda.beans.BeanDefinition;
import org.joda.beans.JodaBeanUtils;
import org.joda.beans.MetaProperty;
import org.joda.beans.Property;
import org.joda.beans.PropertyDefinition;
import org.joda.beans.impl.direct.DirectBeanBuilder;
import org.joda.beans.impl.direct.DirectMetaProperty;
import org.joda.beans.impl.direct.DirectMetaPropertyMap;

import com.opengamma.analytics.financial.credit.StubType;
import com.opengamma.financial.convention.businessday.BusinessDayConvention;
import com.opengamma.financial.convention.daycount.DayCount;
import com.opengamma.financial.convention.frequency.Frequency;
import com.opengamma.financial.security.FinancialSecurityVisitor;
import com.opengamma.financial.security.swap.InterestRateNotional;
import com.opengamma.id.ExternalId;

/**
 *
 */
@BeanDefinition
public class StandardCDSSecurity extends CreditDefaultSwapSecurity {

  /** Serialization version */
  private static final long serialVersionUID = 1L;

  /**
   * The quoted spread.
   */
  @PropertyDefinition(validate = "notNull")
  private double _quotedSpread;

  /**
   * The up-front amount.
   */
  @PropertyDefinition(validate = "notNull")
  private InterestRateNotional _upfrontAmount;

  /**
   * The date for exchange of the upfront.
   */
  @PropertyDefinition(validate = "notNull")
  private ZonedDateTime _cashSettlementDate;

  /**
   * The coupon rate in basis points.
   */
  @PropertyDefinition(validate = "notNull")
  private double _couponRate;

  StandardCDSSecurity() { // For Fudge builder
    super();
  }

  public StandardCDSSecurity(final boolean isBuy, final ExternalId protectionSeller, final ExternalId protectionBuyer, final ExternalId referenceEntity, //CSIGNORE
      final String debtSeniority, final String restructuringClause, final ExternalId regionId, final ZonedDateTime startDate,
      final ZonedDateTime effectiveDate, final ZonedDateTime maturityDate, final StubType stubType, final Frequency couponFrequency, final DayCount dayCount,
      final BusinessDayConvention businessDayConvention, final boolean immAdjustMaturityDate, final boolean adjustEffectiveDate,
      final boolean adjustMaturityDate, final InterestRateNotional notional, final double recoveryRate, final boolean includeAccruedPremium,
      final boolean protectionStart, final CDSType cdsType, final double quotedSpread, final InterestRateNotional upfrontAmount,
      final ZonedDateTime cashSettlementDate, final double couponRate, final CDSType type) {
    super(isBuy, protectionSeller, protectionBuyer, referenceEntity, debtSeniority, restructuringClause, regionId, startDate,
        effectiveDate, maturityDate, stubType, couponFrequency, dayCount, businessDayConvention, immAdjustMaturityDate, adjustEffectiveDate,
        adjustMaturityDate, notional, recoveryRate, includeAccruedPremium, protectionStart, cdsType);
    setQuotedSpread(quotedSpread);
    setUpfrontAmount(upfrontAmount);
    setCashSettlementDate(cashSettlementDate);
    setCouponRate(couponRate);
  }

  @Override
  public final <T> T accept(final FinancialSecurityVisitor<T> visitor) {
    return visitor.visitStandardCDSSecurity(this);
  }

  //------------------------- AUTOGENERATED START -------------------------
  ///CLOVER:OFF
  /**
   * The meta-bean for {@code StandardCDSSecurity}.
   * @return the meta-bean, not null
   */
  public static StandardCDSSecurity.Meta meta() {
    return StandardCDSSecurity.Meta.INSTANCE;
  }
  static {
    JodaBeanUtils.registerMetaBean(StandardCDSSecurity.Meta.INSTANCE);
  }

  @Override
  public StandardCDSSecurity.Meta metaBean() {
    return StandardCDSSecurity.Meta.INSTANCE;
  }

  @Override
  protected Object propertyGet(String propertyName, boolean quiet) {
    switch (propertyName.hashCode()) {
      case -963526405:  // quotedSpread
        return getQuotedSpread();
      case -716346778:  // upfrontAmount
        return getUpfrontAmount();
      case 487875210:  // cashSettlementDate
        return getCashSettlementDate();
      case 609556006:  // couponRate
        return getCouponRate();
    }
    return super.propertyGet(propertyName, quiet);
  }

  @Override
  protected void propertySet(String propertyName, Object newValue, boolean quiet) {
    switch (propertyName.hashCode()) {
      case -963526405:  // quotedSpread
        setQuotedSpread((Double) newValue);
        return;
      case -716346778:  // upfrontAmount
        setUpfrontAmount((InterestRateNotional) newValue);
        return;
      case 487875210:  // cashSettlementDate
        setCashSettlementDate((ZonedDateTime) newValue);
        return;
      case 609556006:  // couponRate
        setCouponRate((Double) newValue);
        return;
    }
    super.propertySet(propertyName, newValue, quiet);
  }

  @Override
  protected void validate() {
    JodaBeanUtils.notNull(_quotedSpread, "quotedSpread");
    JodaBeanUtils.notNull(_upfrontAmount, "upfrontAmount");
    JodaBeanUtils.notNull(_cashSettlementDate, "cashSettlementDate");
    JodaBeanUtils.notNull(_couponRate, "couponRate");
    super.validate();
  }

  @Override
  public boolean equals(Object obj) {
    if (obj == this) {
      return true;
    }
    if (obj != null && obj.getClass() == this.getClass()) {
      StandardCDSSecurity other = (StandardCDSSecurity) obj;
      return JodaBeanUtils.equal(getQuotedSpread(), other.getQuotedSpread()) &&
          JodaBeanUtils.equal(getUpfrontAmount(), other.getUpfrontAmount()) &&
          JodaBeanUtils.equal(getCashSettlementDate(), other.getCashSettlementDate()) &&
          JodaBeanUtils.equal(getCouponRate(), other.getCouponRate()) &&
          super.equals(obj);
    }
    return false;
  }

  @Override
  public int hashCode() {
    int hash = 7;
    hash += hash * 31 + JodaBeanUtils.hashCode(getQuotedSpread());
    hash += hash * 31 + JodaBeanUtils.hashCode(getUpfrontAmount());
    hash += hash * 31 + JodaBeanUtils.hashCode(getCashSettlementDate());
    hash += hash * 31 + JodaBeanUtils.hashCode(getCouponRate());
    return hash ^ super.hashCode();
  }

  //-----------------------------------------------------------------------
  /**
   * Gets the quoted spread.
   * @return the value of the property, not null
   */
  public double getQuotedSpread() {
    return _quotedSpread;
  }

  /**
   * Sets the quoted spread.
   * @param quotedSpread  the new value of the property, not null
   */
  public void setQuotedSpread(double quotedSpread) {
    JodaBeanUtils.notNull(quotedSpread, "quotedSpread");
    this._quotedSpread = quotedSpread;
  }

  /**
   * Gets the the {@code quotedSpread} property.
   * @return the property, not null
   */
  public final Property<Double> quotedSpread() {
    return metaBean().quotedSpread().createProperty(this);
  }

  //-----------------------------------------------------------------------
  /**
   * Gets the up-front amount.
   * @return the value of the property, not null
   */
  public InterestRateNotional getUpfrontAmount() {
    return _upfrontAmount;
  }

  /**
   * Sets the up-front amount.
   * @param upfrontAmount  the new value of the property, not null
   */
  public void setUpfrontAmount(InterestRateNotional upfrontAmount) {
    JodaBeanUtils.notNull(upfrontAmount, "upfrontAmount");
    this._upfrontAmount = upfrontAmount;
  }

  /**
   * Gets the the {@code upfrontAmount} property.
   * @return the property, not null
   */
  public final Property<InterestRateNotional> upfrontAmount() {
    return metaBean().upfrontAmount().createProperty(this);
  }

  //-----------------------------------------------------------------------
  /**
   * Gets the date for exchange of the upfront.
   * @return the value of the property, not null
   */
  public ZonedDateTime getCashSettlementDate() {
    return _cashSettlementDate;
  }

  /**
   * Sets the date for exchange of the upfront.
   * @param cashSettlementDate  the new value of the property, not null
   */
  public void setCashSettlementDate(ZonedDateTime cashSettlementDate) {
    JodaBeanUtils.notNull(cashSettlementDate, "cashSettlementDate");
    this._cashSettlementDate = cashSettlementDate;
  }

  /**
   * Gets the the {@code cashSettlementDate} property.
   * @return the property, not null
   */
  public final Property<ZonedDateTime> cashSettlementDate() {
    return metaBean().cashSettlementDate().createProperty(this);
  }

  //-----------------------------------------------------------------------
  /**
   * Gets the coupon rate in basis points.
   * @return the value of the property, not null
   */
  public double getCouponRate() {
    return _couponRate;
  }

  /**
   * Sets the coupon rate in basis points.
   * @param couponRate  the new value of the property, not null
   */
  public void setCouponRate(double couponRate) {
    JodaBeanUtils.notNull(couponRate, "couponRate");
    this._couponRate = couponRate;
  }

  /**
   * Gets the the {@code couponRate} property.
   * @return the property, not null
   */
  public final Property<Double> couponRate() {
    return metaBean().couponRate().createProperty(this);
  }

  //-----------------------------------------------------------------------
  /**
   * The meta-bean for {@code StandardCDSSecurity}.
   */
  public static class Meta extends CreditDefaultSwapSecurity.Meta {
    /**
     * The singleton instance of the meta-bean.
     */
    static final Meta INSTANCE = new Meta();

    /**
     * The meta-property for the {@code quotedSpread} property.
     */
    private final MetaProperty<Double> _quotedSpread = DirectMetaProperty.ofReadWrite(
        this, "quotedSpread", StandardCDSSecurity.class, Double.TYPE);
    /**
     * The meta-property for the {@code upfrontAmount} property.
     */
    private final MetaProperty<InterestRateNotional> _upfrontAmount = DirectMetaProperty.ofReadWrite(
        this, "upfrontAmount", StandardCDSSecurity.class, InterestRateNotional.class);
    /**
     * The meta-property for the {@code cashSettlementDate} property.
     */
    private final MetaProperty<ZonedDateTime> _cashSettlementDate = DirectMetaProperty.ofReadWrite(
        this, "cashSettlementDate", StandardCDSSecurity.class, ZonedDateTime.class);
    /**
     * The meta-property for the {@code couponRate} property.
     */
    private final MetaProperty<Double> _couponRate = DirectMetaProperty.ofReadWrite(
        this, "couponRate", StandardCDSSecurity.class, Double.TYPE);
    /**
     * The meta-properties.
     */
    private final Map<String, MetaProperty<?>> _metaPropertyMap$ = new DirectMetaPropertyMap(
      this, (DirectMetaPropertyMap) super.metaPropertyMap(),
        "quotedSpread",
        "upfrontAmount",
        "cashSettlementDate",
        "couponRate");

    /**
     * Restricted constructor.
     */
    protected Meta() {
    }

    @Override
    protected MetaProperty<?> metaPropertyGet(String propertyName) {
      switch (propertyName.hashCode()) {
        case -963526405:  // quotedSpread
          return _quotedSpread;
        case -716346778:  // upfrontAmount
          return _upfrontAmount;
        case 487875210:  // cashSettlementDate
          return _cashSettlementDate;
        case 609556006:  // couponRate
          return _couponRate;
      }
      return super.metaPropertyGet(propertyName);
    }

    @Override
    public BeanBuilder<? extends StandardCDSSecurity> builder() {
      return new DirectBeanBuilder<StandardCDSSecurity>(new StandardCDSSecurity());
    }

    @Override
    public Class<? extends StandardCDSSecurity> beanType() {
      return StandardCDSSecurity.class;
    }

    @Override
    public Map<String, MetaProperty<?>> metaPropertyMap() {
      return _metaPropertyMap$;
    }

    //-----------------------------------------------------------------------
    /**
     * The meta-property for the {@code quotedSpread} property.
     * @return the meta-property, not null
     */
    public final MetaProperty<Double> quotedSpread() {
      return _quotedSpread;
    }

    /**
     * The meta-property for the {@code upfrontAmount} property.
     * @return the meta-property, not null
     */
    public final MetaProperty<InterestRateNotional> upfrontAmount() {
      return _upfrontAmount;
    }

    /**
     * The meta-property for the {@code cashSettlementDate} property.
     * @return the meta-property, not null
     */
    public final MetaProperty<ZonedDateTime> cashSettlementDate() {
      return _cashSettlementDate;
    }

    /**
     * The meta-property for the {@code couponRate} property.
     * @return the meta-property, not null
     */
    public final MetaProperty<Double> couponRate() {
      return _couponRate;
    }

  }

  ///CLOVER:ON
  //-------------------------- AUTOGENERATED END --------------------------
}
