<project name="og-language" default="compile">

  <import file="${basedir}/build-core.xml" />
  <import file="${basedir}/delete-unused-jars.xml" />

  <target name="fudge-proto" depends="core.fudge-proto">
    <subant buildpath="${solution.dir}/Service" target="fudge-proto" inheritall="true" />
  </target>

  <path id="cc.build.path">
    <pathelement path="${solution.dir}/Util" />
    <pathelement path="${solution.dir}/Service" />
    <pathelement path="${solution.dir}/Connector" />
    <pathelement path="${solution.dir}/ServiceRunner" />
  </path>

  <target name="dist-publish" depends="common.dist-publish">
    <mkdir dir="${dist.dir}" />
    <mkdir dir="${dist.dir}/bin" />
    <mkdir dir="${dist.dir}/include" />
    <mkdir dir="${dist.dir}/lib" />
    <subant buildpathref="cc.build.path" target="dist-publish" inheritall="true" />
    <mkdir dir="${dist.dir}/bin/ext" />
    <copy file="${solution.dir}/config/0${ant.project.name}.xml" todir="${dist.dir}/bin/ext" />
    <zip destfile="${dist.dir}/${ant.project.name}-bin.zip" basedir="${dist.dir}/bin" whenempty="create" />
    <zip destfile="${dist.dir}/${ant.project.name}-include.zip" basedir="${dist.dir}/include" whenempty="create" />
    <zip destfile="${dist.dir}/${ant.project.name}-lib.zip" basedir="${dist.dir}/lib" whenempty="create" />
    <delete dir="${dist.dir}/bin" />
    <delete dir="${dist.dir}/include" />
    <delete dir="${dist.dir}/lib" />
  </target>

  <target name="resolve" depends="core.resolve,deploy-jars,delete-unused-jars" />

  <target name="config" depends="core.config">
    <mkdir dir="${build.dir}/ext" />
    <copy todir="${build.dir}/ext" file="${solution.dir}/config/0${ant.project.name}.xml" />
  </target>

</project>
