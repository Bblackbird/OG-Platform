<project name="build-cpp">

  <property file="${basedir}/build.properties" />
  <property environment="env" />
  <property file="${solution.dir}/build.properties" />

  <condition property="env.IVY_SHARED_DEFAULT_ROOT_DEFAULT" value="${env.IVY_SHARED_DEFAULT_ROOT_WINDOWS}" else="${env.IVY_SHARED_DEFAULT_ROOT_NONWINDOWS}"><os family="windows" /></condition>
  <condition property="env.IVY_SHARED_DEFAULT_ROOT" value="${env.IVY_SHARED_DEFAULT_ROOT_DEFAULT}"><not><isset property="env.IVY_SHARED_DEFAULT_ROOT" /></not></condition>
  <import file="${common.dir}/common-ivy.xml" />

  <target name="clean-lib" />

  <!-- Use Visual Studio if it's available -->
  <available property="cpp.environment" value="msvc" file="msbuild.exe" filepath="${env.Path}" />
  <!-- Default to POSIX-style tools and Ant's built in tasks -->
  <property name="cpp.environment" value="posix" />

  <import file="build-${cpp.environment}.xml" />

  <target name="clean-src" description="--> Remove the autogenerated files (.gitignore'd ones)">
    <subant genericantfile="${common.dir}/gitignore.xml">
      <property name="wkspace.dir" value="${wkspace.dir}" />
      <dirset dir="${basedir}" />
    </subant>
  </target>

  <target name="dist" depends="build-cpp-impl.dist">
    <mkdir dir="${dist.dir}/include/${ant.project.name}" />
    <copy todir="${dist.dir}/include/${ant.project.name}">
      <fileset dir="${basedir}">
        <include name="*.h" />
      </fileset>
    </copy>
  </target>

  <target name="compile-after">
    <!-- Dummy hook that the slaves will invoke after a compilation with ${compile.type} set -->
  </target>

</project>
